<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Technocomparer - Compare the Best Tech</title>
<meta name="description" content="Technocomparer is your go-to hub for comparing the latest tech gadgets, from phones and laptops to drones and gaming gear. Explore detailed specs, prices, and reviews, all in one place. Find the best deals instantly and shop smarter with trusted affiliate links to top online retailers worldwide.">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --bg:#0b0f14;--panel:#111520;--ink:#e9eef2;
    --neon:#00f7ff;--accent:#a020f0;--muted:#8ea0b3;--line:#1e2430;--good:#12c48b
  }
  body{font-family:'Open Sans',sans-serif;background:var(--bg);color:var(--ink);line-height:1.6}
  a{color:inherit;text-decoration:none}

  header{position:sticky;top:0;z-index:10;display:flex;gap:24px;align-items:center;justify-content:space-between;padding:18px 28px;background:#0f131a;border-bottom:1px solid var(--line)}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:28px;height:28px;border:2px solid var(--neon);border-radius:6px;box-shadow:0 0 12px var(--neon) inset}
  h1{font-family:'Orbitron',sans-serif;font-size:20px;color:var(--neon);letter-spacing:0.5px}
  nav a{margin-left:18px;font-weight:600;position:relative}
  nav a::after{content:'';position:absolute;left:0;bottom:-6px;width:0;height:2px;background:var(--accent);transition:width .2s}
  nav a:hover::after{width:100%}

  .bar{margin:20px auto 0;max-width:720px;padding:0 16px}
  #search{width:100%;padding:12px 14px;border-radius:8px;border:1px solid var(--line);background:#0d121a;color:var(--ink);font-size:15px;outline:none}
  #search:focus{box-shadow:0 0 10px var(--accent)}

  .section{padding:24px 16px;max-width:1200px;margin:0 auto}
  .carousel{display:flex;gap:16px;overflow-x:auto;scroll-behavior:smooth;padding-bottom:6px}
  .carousel::-webkit-scrollbar{height:6px}
  .carousel::-webkit-scrollbar-thumb{background:#2a3142;border-radius:4px}
  .deal{flex:0 0 300px;background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:10px}
  .deal img{width:100%;height:180px;object-fit:cover;border-radius:8px;transition:transform .25s}
  .deal img:hover{animation:shake .5s}
  .deal h3{font-family:'Orbitron',sans-serif;color:var(--neon);margin:10px 0 4px}
  .price{color:var(--ink);opacity:.9}
  .buy{margin-top:8px;display:inline-block;background:var(--neon);color:#02141a;font-weight:700;border:none;border-radius:8px;padding:10px 12px;cursor:pointer}
  .buy:hover{background:var(--accent);color:#fff}

  .cats{display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
  .cat{background:var(--panel);border:1px solid var(--line);padding:14px 18px;border-radius:10px;cursor:pointer;transition:box-shadow .2s}
  .cat:hover{box-shadow:0 0 14px var(--neon)}

  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px;display:flex;flex-direction:column}
  .card:hover{box-shadow:0 0 14px var(--accent)}
  .card img{width:100%;height:150px;object-fit:cover;border-radius:8px;transition:transform .25s}
  .card img:hover{animation:shake .5s}
  .card h4{font-family:'Orbitron',sans-serif;color:var(--neon);margin:10px 0 6px;font-size:16px}
  .spec{font-size:13px;color:var(--muted);margin-bottom:6px}
  .stars{color:#f5d442;font-size:14px;margin-bottom:6px}
  .priceRow{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:8px 0}
  .badge{background:rgba(18,196,139,.12);color:var(--good);border:1px solid rgba(18,196,139,.4);padding:2px 6px;border-radius:6px;font-size:12px;font-weight:700}
  .stores{display:flex;flex-direction:column;gap:6px;margin-top:6px}
  .store-btn{display:flex;justify-content:space-between;align-items:center;gap:10px;background:#0d121a;border:1px solid var(--line);border-radius:8px;padding:8px 10px}
  .store-btn:hover{border-color:var(--accent);box-shadow:0 0 10px rgba(160,32,240,.25)}
  .store-btn span{font-size:13px}
  .store-btn strong{font-size:14px}

  .panel{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:16px}

  footer{text-align:center;padding:28px 16px;border-top:1px solid var(--line);color:var(--muted);margin-top:32px;font-size:14px}

  @keyframes shake{
    0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}
    20%{transform:translate(-3px,0) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}
    40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}
    60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}
    80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}
    100%{transform:translate(1px,-2px) rotate(-1deg)}
  }
</style>
</head>
<body id="top">

<header>
  <div class="brand">
    <div class="logo"></div>
    <h1>Technocomparer</h1>
  </div>
  <nav>
    <a href="#top">Home</a>
    <a href="#categories">Categories</a>
    <a href="#deals">Deals</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<div class="bar">
  <input id="search" type="text" placeholder="Search phones, laptops, TVs, drones…">
</div>

<section class="section" id="deals">
  <h2 style="font-family:'Orbitron',sans-serif;color:var(--ink);margin-bottom:10px">Featured Deals</h2>
  <div class="carousel" id="carousel"></div>
</section>

<section class="section" id="categories">
  <h2 style="font-family:'Orbitron',sans-serif;color:var(--ink);margin-bottom:10px">Browse Categories</h2>
  <div class="cats" id="catRow"></div>
</section>

<section class="section">
  <div class="grid" id="grid"></div>
</section>

<section class="section" id="about">
  <div class="panel">
    <h2 style="font-family:'Orbitron',sans-serif;margin-bottom:6px;color:var(--ink)">About Technocomparer</h2>
    <p style="color:var(--muted)">We help you compare popular tech across trusted stores. Specs, prices, and reviews in one place — so you can shop smarter and save. We may earn a commission from qualifying purchases via affiliate links; this never affects your price.</p>
  </div>
</section>

<section class="section" id="contact">
  <div class="panel">
    <h2 style="font-family:'Orbitron',sans-serif;margin-bottom:6px;color:var(--ink)">Contact</h2>
    <p style="color:var(--muted)">Questions or partnerships? Email <a href="mailto:hello@technocomparer.com" style="color:var(--neon)">hello@technocomparer.com</a>.</p>
  </div>
</section>

<footer>
  Technocomparer.com • As an Amazon Associate we earn from qualifying purchases • © 2025
</footer>

<script>
  const ZAR = (n)=>'R'+Number(n).toLocaleString('en-ZA');

  // Accept BOTH data formats:
  // A) Rich object: { featuredCount, categories:[...], products:[{...}] }
  // B) Simple array: [{name,image,price,links:{Amazon:..., ...}}, ...]
  function normalizeData(raw){
    if (raw && !Array.isArray(raw) && raw.products && Array.isArray(raw.products)) return raw;

    if (Array.isArray(raw)) {
      const products = raw.map((item, i) => {
        const affiliate = {};
        if (item.links && typeof item.links === 'object') {
          for (const k of Object.keys(item.links)) {
            affiliate[k.toLowerCase().replace(/\s+/g,'')] = item.links[k] || '#';
          }
        }
        const basePrice = parseInt(String(item.price||'').replace(/[^\d]/g,''), 10) || 0;
        const storeKeys = ['amazon','takealot','ebay','aliexpress','temu'];
        const storePrices = {};
        storeKeys.forEach(k=>{ storePrices[k] = affiliate[k] ? basePrice : 0; });

        return {
          id: i+1,
          name: item.name || `Item ${i+1}`,
          category: (item.category || 'other').toLowerCase(),
          spec: item.spec || '',
          rating: item.rating || 4,
          img: item.image || item.img || `https://picsum.photos/seed/${i}/600/400`,
          storePrices,
          affiliate
        };
      });
      const categories = Array.from(new Set(products.map(p=>p.category))).map(c=> c.charAt(0).toUpperCase()+c.slice(1));
      return { featuredCount: Math.min(8, products.length), categories, products };
    }

    return { featuredCount: 0, categories: [], products: [] };
  }

  function bestStore(storePrices){
    const entries = Object.entries(storePrices||{}).filter(([_,p])=>p && p>0);
    if(!entries.length) return null;
    return entries.reduce((a,b)=> a[1] <= b[1] ? a : b); // [key, price]
  }
  function stars(n){return '★'.repeat(n)+'☆'.repeat(5-n)}

  async function loadData(){
    try{
      const res = await fetch('products.json', {cache:'no-store'});
      if(!res.ok) throw new Error('Failed to load products.json');
      const raw = await res.json();
      const data = normalizeData(raw);
      initSite(data);
    }catch(e){
      document.getElementById('grid').innerHTML =
        `<div class="panel" style="grid-column:1/-1">⚠️ Could not load products.json. Error: ${e.message}</div>`;
    }
  }

  function initSite({categories, products, featuredCount=8}){
    // Categories
    const catRow = document.getElementById('catRow');
    catRow.innerHTML = '';
    (categories||[]).forEach(c=>{
      const el = document.createElement('div');
      el.className='cat';
      el.dataset.category = c.toLowerCase();
      el.textContent = c;
      el.onclick = ()=> filterCategory(c.toLowerCase());
      catRow.appendChild(el);
    });

    // Featured
    const carousel = document.getElementById('carousel');
    carousel.innerHTML = '';
    (products||[]).slice(0,featuredCount).forEach(p=>{
      const b = bestStore(p.storePrices||{});
      const box = document.createElement('div');
      box.className='deal';
      box.innerHTML = `
        <img src="${p.img}" alt="${p.name}">
        <h3>${p.name}</h3>
        <div class="price">${b? `${ZAR(b[1])} <span class="badge">Best price</span>` : 'See stores'}</div>
        <button class="buy" onclick="scrollToGrid('${p.name}')">Compare Prices</button>
      `;
      carousel.appendChild(box);
    });

    // Products grid
    const grid = document.getElementById('grid');
    function render(list){
      grid.innerHTML='';
      list.forEach(p=>{
        const best = bestStore(p.storePrices||{});
        const storesHtml = Object.entries(p.storePrices||{}).map(([store,price])=>{
          if(!price) return '';
          const url = p.affiliate?.[store] || '#';
          const label = store.charAt(0).toUpperCase()+store.slice(1);
          return `<a class="store-btn" href="${url}" target="_blank" rel="noopener">
                    <span>${label}</span><strong>${ZAR(price)}</strong>
                  </a>`;
        }).join('');

        const card = document.createElement('div');
        card.className='card';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <h4>${p.name}</h4>
          <div class="spec">${p.spec||''}</div>
          <div class="stars">${stars(p.rating||4)}</div>
          <div class="priceRow">
            ${best ? `<span class="badge">Best price: ${ZAR(best[1])}</span>` : `<span class="badge" style="opacity:.75">Compare stores</span>`}
          </div>
          <div class="stores">${storesHtml}</div>
        `;
        grid.appendChild(card);
      });
    }

    // Search + filters
    const search = document.getElementById('search');
    search.oninput = ()=>{
      const q = search.value.toLowerCase();
      const list = (products||[]).filter(p => p.name.toLowerCase().includes(q) || (p.category||'').includes(q));
      render(list);
    };

    window.filterCategory = (cat)=>{
      const list = (products||[]).filter(p=>p.category===cat);
      render(list.length ? list : (products||[]));
      window.scrollTo({top: document.querySelector('.section:nth-of-type(3)').offsetTop - 60, behavior:'smooth'});
    };

    window.scrollToGrid = (name)=>{
      window.scrollTo({top: document.querySelector('.section:nth-of-type(3)').offsetTop - 60, behavior:'smooth'});
      const list = (products||[]).filter(p => p.name.toLowerCase().includes(name.toLowerCase()));
      render(list.length? list : (products||[]));
    };

    // Initial render
    render(products||[]);
  }

  loadData();
</script>
</body>
</html>
